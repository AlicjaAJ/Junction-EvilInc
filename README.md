
# THE QUEEN OF HEARTS

Have you ever imagined stretching a simple idea into an enormous, constantly evolving challenge through skillful AI implementation? If you have, sorry... we did it first!

We've taken the core concept of a classic game — Battleship — and evolved it into a cutting-edge digital experience, implementing elements of Large Language Models (LLMs) and Machine Learning (ML) to create a deeply personal (and dystopian?) gaming experience.

## Core Concept: Two Paths to Victory
The core idea is simple: You compete against an evolving LLM opponent.
Both you and the AI hide your Heart somewhere on a grid with a uniquely generated and visually stunning background.

Your objective is to find the AI's Heart, while the AI's sole objective is to trick you into guessing the wrong location.
Watch out — because if you guess wrong, you lose everything.

Yet, remember: You shape the path to victory. Do you choose Dialog, or Combat?

## The Duel of Minds
What it is:
Dialogue under intense time pressure.

What is your objective?
Defeat the AI in the mental game of two lie masters, accounting for the AI's constant evolution.
The more you lie and the more you believe, the clearer your psychological profile becomes, providing the AI with the information on how to manipulate you into loss.

## The Duel Of Bodies
What it is:
Grid-based tactical combat, building and evolving your Human Cell with every strategic step.

Every level:
The AI triggers its Cellular Mutation, weakening a specific, crucial part of your developing Human Cell profile.

What is your objective?
...

---

To further elevate your experience, each game contains a unique story about the dystopian world of the game, where the ongoing war between humans and IA have destroyed the planet — crafted dynamically by the LLM.

The story is shattered into eight pieces:

You receive the narrative's opening before the game begins.
The remaining seven pieces are hidden within the grid of each level.
But remember:

Knowledge has its costs.

You must actively choose whether you want to learn the hidden story, as it requires spending limited time and resources to find each piece.

## This creates strategic tension:

Miss any part, and it is lost forever.
The next round generates a completely new challenge and different story pieces.
You can skip the lore — but in that case, you'll never know its unique ending...
The Tailored Ending
This is our final surprise: your ending.

Masterfully tailored to your profile, each conclusion is individual and unique to your game. It doesn't depend on your final guess, but **on who you are...

**Are you ready to face an opponent that knows you better than you know yourself? Are you ready to join the Utopia?

## Overview

This project combines classic grid-based strategy gameplay with modern AI capabilities. You and an AI opponent each hide an item on a grid, then race to find each other's item first. The game features:

- **Dynamic Story Generation**: Each game begins with a unique, LLM-generated mission briefing set in a dystopian AI vs Humanity conflict
- **AI Opponent with Personalities**: Face an opponent that can be honest, deceptive, or unpredictable
- **Interactive Chat System**: Exchange hints and engage in dialogue with your AI opponent
- **Multiple Difficulty Levels**: Choose from Easy (5x5), Medium (10x10), or Hard (15x15) grids
- **Time-Limited Gameplay**: Race against the clock with limited attempts to find your target
- **Outcome-Based Endings**: Each game concludes with a dynamically generated story based on your victory or defeat

## Features

### Dynamic Narratives
Every game session starts with a unique mission briefing generated by Google's Gemini LLM. The story sets the scene for your mission, introducing the items you must protect and locate. The narrative adapts to the game's outcome, providing a personalized conclusion.

### AI Opponent System
The AI opponent features three distinct personalities:
- **Honest**: Always tells the truth when asked about its item's location
- **Deceptive**: Strategically lies to mislead you
- **50-50**: Unpredictably switches between truth and deception

### Strategic Gameplay
- Hide your item (beacon) on the grid
- Search for the AI's item (artifact) within a time limit
- Use limited attempts wisely
- Engage with the AI through chat to gather information (or misinformation)
- Make strategic decisions based on the AI's personality and responses

### Cyberpunk Aesthetic
The game features a retro-futuristic cyberpunk visual style with:
- CRT scanline effects
- Neon cyan color scheme
- Terminal-style UI elements
- Dynamic image generation for mission briefings and outcomes

## Prerequisites

- Python 3.8 to 3.13
- Google Gemini API key (from [Google AI Studio](https://aistudio.google.com/)) or Google Cloud Vertex AI credentials
- Virtual environment (recommended)

## Installation

### 1. Clone the Repository

```bash
cd Junction-EvilInc
```

### 2. Set Up Virtual Environment

```bash
# Create virtual environment
python3 -m venv venv  # or: python -m venv venv

# Activate virtual environment
source venv/bin/activate     # macOS / Linux
venv\Scripts\activate        # Windows
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. Configure API Access

Create a `.env` file in the project root directory.

#### Option A: Google AI Studio (Recommended for Quick Setup)

Edit `.env` and add:

```env
USE_VERTEX_AI=false
GEMINI_API_KEY=your-api-key-here
GEMINI_MODEL=gemini-2.0-flash-exp
```

**To get your API key:**
1. Visit [Google AI Studio](https://aistudio.google.com/)
2. Click "Get API key"
3. Create a new API key
4. Copy and paste it into your `.env` file

#### Option B: Google Cloud Vertex AI

Edit `.env` and add:

```env
USE_VERTEX_AI=true
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_LOCATION=us-central1
GEMINI_MODEL=gemini-2.0-flash-exp
```

**Setup steps:**
1. Ensure you have a Google Cloud project with Vertex AI API enabled
2. Authenticate: `gcloud auth application-default login`
3. Add your project ID to `.env`

=====
DEMO
The demo provides a focused look at the following features of the game:
- On loop experience from an exemplary level, with possibility of choosing the difficulty and compeete with three of our models: the one which always Lies/ always Tells the Truths/ does 50:50.
- Psychological Dialogue: Engage in the core mechanic where your dialogue is constantly scored by the ML system to create tailored LLM models which constantly try to trick you into loosing.
- Stunning visuals, based on 90s games.
- Unique stories which make every round unique.

<img width="902" height="735" alt="Screenshot 2025-11-16 at 09 14 05" src="https://github.com/user-attachments/assets/646e278c-e5cb-4fa7-a2d1-b5af00895774" />
<img width="903" height="735" alt="Screenshot 2025-11-16 at 09 15 06" src="https://github.com/user-attachments/assets/7c12ae10-a595-422e-9b00-bdba05e49ae2" />
<img width="906" height="734" alt="Screenshot 2025-11-16 at 09 14 16" src="https://github.com/user-attachments/assets/70984939-f998-4c90-9001-6aa6d4ec7b73" />
<img width="906" height="737" alt="Screenshot 2025-11-16 at 09 15 32" src="https://github.com/user-attachments/assets/817bed8c-d407-47d6-8d43-e0d3b8961432" />

=======
**Security Note:** The `.env` file is excluded from version control. Never commit your API keys.
>>>>>>> 578e5e9 (update readme)

## Running the Game

```bash
# Activate virtual environment if not already active
source venv/bin/activate     # macOS / Linux
venv\Scripts\activate        # Windows

# Run the game
python3 main.py  # or: python main.py
```

## Game Flow

1. **Mission Briefing**: A dynamically generated story sets up your mission
2. **Difficulty Selection**: Choose Easy (5x5), Medium (10x10), or Hard (15x15)
3. **Item Placement**: Hide your beacon on the grid
4. **Chat Phase**: Optionally exchange hints with the AI opponent
5. **Turn-Based Gameplay**: 
   - Click cells to reveal them
   - Find the AI's artifact before it finds your beacon
   - Manage your time and attempts carefully
6. **Mission Outcome**: A dynamically generated ending story concludes your mission

## Game Mechanics

### Difficulty Levels

| Difficulty | Grid Size | Time Limit | Max Attempts |
|------------|-----------|------------|--------------|
| Easy       | 5x5       | 30 seconds | 5 attempts   |
| Medium     | 10x10     | 40 seconds | 4 attempts   |
| Hard       | 15x15     | 50 seconds | 3 attempts   |

### Victory Conditions

- **You Win**: Find the AI's artifact before time runs out or attempts are exhausted
- **AI Wins**: Time expires, attempts are exhausted, or the AI finds your beacon first

### Chat System

Click the chat input box to interact with the AI opponent. You can:
- Ask about the AI's item location (responses depend on personality)
- Request strategic hints
- Engage in character-appropriate dialogue

The AI maintains context from the mission briefing and adapts its responses based on its personality.

## Project Structure

```
Junction-EvilInc/
├── main.py              # Main game loop and state management
├── story_generator.py   # LLM-powered narrative generation
├── opponent_ai.py       # AI opponent with personality system
├── cell.py              # Grid cell implementation
├── image_generator.py   # Dynamic image generation
├── config.py            # Configuration and environment setup
├── requirements.txt     # Python dependencies
└── README.md            # This file
```

## Technical Details

### Technologies Used

- **Pygame**: Game engine and rendering
- **Google Gemini API**: LLM for story generation and AI opponent
- **Pillow (PIL)**: Image processing
- **python-dotenv**: Environment variable management

### API Models

The game uses Google's Gemini models with automatic fallback:
- Primary: `gemini-2.0-flash-exp`
- Fallback: `gemini-2.0-flash-lite` or `gemini-2.5-flash-lite`

### Architecture

- **Modular Design**: Separate modules for story generation, AI opponent, and game logic
- **Threading**: Background story and image generation to prevent UI blocking
- **State Management**: Clear game state transitions for smooth gameplay
- **Error Handling**: Graceful fallbacks for API failures

## Troubleshooting

### API Key Issues

- Ensure your `.env` file exists in the project root
- Verify the API key has no extra spaces or quotes
- Check your API quota at [Google AI Studio](https://aistudio.google.com/)
- For Vertex AI, ensure authentication is set up: `gcloud auth application-default login`

### Import Errors

```bash
pip install --upgrade -r requirements.txt
```

### Story Generation Fails

- Check your internet connection
- Verify API key is valid and has available quota
- The game will use a fallback story if generation fails

### Image Generation Issues

- Image generation is optional; the game works without it
- If image generation fails, placeholder graphics are displayed
- Ensure you have the `requests` library installed for image generation

## Development

### Code Style

- Follows Python PEP 8 conventions
- Maximum line length: 100 characters
- Uses double quotes for strings
- DRY principles applied throughout

### Contributing

This project was created for the 2025 Junction: Utopia and Dystopia challenge. For contributions or questions, please refer to the project repository.

## License

This project was developed for the Junction 2025 hackathon challenge.

## Acknowledgments

- Built for Junction 2025: Utopia and Dystopia
- Uses Google Gemini API for AI capabilities
- Inspired by classic grid-based strategy games
